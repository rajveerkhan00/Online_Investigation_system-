import { collection, getDocs, query, where } from "firebase/firestore";
import { db, auth } from "../firebase"; // Import Firebase configurations

 
 useEffect(() => {
    const fetchFirs = async () => {
      // Wait for Firebase to initialize and check if a user is logged in
      auth.onAuthStateChanged(async (user) => {
        if (!user) {
          // If no user is logged in, stop loading and return
          setLoading(false);
          return;
        }

        try {
          // Fetch FIRs for the logged-in user
          const q = query(collection(db, "firs"), where("userId", "==", user.uid));
          const querySnapshot = await getDocs(q);
          const firData = querySnapshot.docs.map((doc) => ({
            id: doc.id,
            ...doc.data(),
          }));
          setFirs(firData);
        } catch (error) {
          toast.error("Failed to fetch FIRs");
          console.error("Error fetching FIRs:", error);
        } finally {
          setLoading(false);
        }
      });
    };

    fetchFirs();
  }, []);